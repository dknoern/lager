
<script>

var customers = {};

function selectCustomer(id){
  //alert('selecting customer ' + id);
   document.location.href = "/#/app/customer/"+id;
}



function mergeCustomers(){

  console.log("merging");

  for (let [key, value] of Object.entries(customers)) {
  console.log(`${key}: ${value}`);
  if(value == true){
    console.log("merging ", key);
  }
}

}


function toggleCustomer(checkbox, id){


 console.log("checked: ",checkbox.checked)
 console.log("toggling customer ID ", id)
 customers[id] = checkbox.checked;
 console.log("customers:",customers);



 var totalChecked = 0;
 for (let [key, value] of Object.entries(customers)) {
  console.log(`${key}: ${value}`);
  if(value == true){
    totalChecked++;
  }
}

console.log("total checked = ", totalChecked);

if(totalChecked > 1) {
            document.getElementById('merge-button').style.visibility = 'visible';
        } else {
            document.getElementById('merge-button').style.visibility = 'hidden';
        }



}





</script>


<h1 class="page-title"><span class="fw-semi-bold">Customers</span></h1>

<section class="widget">
  <div class="widget-body">
    <div class="mt">

      <p>
        <a href="/#/app/customer"><button type="button" class="btn btn-primary"><span class="icon">
          <i class="fa fa-plus-circle"></i>
        </span>New Customer</button></a>
      </p>

      <p>
        <a href="#" data-toggle="modal" data-target="#mergeModal"><button type="button" class="btn btn-success" id="merge-button" style="visibility: hidden;"><span class="icon">
          <i class="fa fa-compress"></i>
        </span>Merge Customers</button></a>
      </p>

      <table id="example" class="display" cellspacing="0" width="100%">
          <thead>
              <tr>
                  <th>Number</th>
                  <th>Name</th>
                  <th>City</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Company</th>
                  <th></th>
              </tr>
          </thead>
      </table>
    </div>
  </div>
</section>






        <!--merge Modal -->
        <div class="modal fade" id="mergeModal" tabindex="-1" role="dialog"
             aria-labelledby="myModalLabel">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        Are you sure you want to merge the selected customers??
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">
                            Cancel
                        </button>
                        <button type="button" class="btn btn-success btn-sm" onClick="mergeCustomers()"
                                data-dismiss="modal">Merge
                        </button>
                    </div>
                </div>
            </div>
        </div>